/* style.css - With Dark Mode, FAB, Calendar, Switch, Swipe */

/* Basic App Wrapper to help with potential full height */
.app-wrapper {
    min-height: 100vh;
    display: flex;
    flex-direction: column;
}
main#appContent {
    flex-grow: 1;
}

/* --- Dark Mode Theme --- */
html.dark-mode {
    /* Core Colors */
    --bulma-body-background-color: #2c2c2c; /* Dark grey */
    --bulma-text: #e0e0e0; /* Light grey text */
    --bulma-text-strong: #ffffff;
    --bulma-link: #61dafb; /* A light blue for links */
    --bulma-link-hover: #74e4ff;
    --bulma-border: #4a4a4a; /* Darker border */
    --bulma-border-hover: #606060;

    /* Component Backgrounds */
    --bulma-box-background-color: #363636; /* Slightly lighter than body */
    --bulma-card-background-color: #3a3a3a;
    --bulma-input-background-color: #3f3f3f;
    --bulma-input-color: var(--bulma-text);
    --bulma-input-border-color: var(--bulma-border);
    --bulma-input-placeholder-color: #7a7a7a;
    --bulma-select-background-color: var(--bulma-input-background-color);
    --bulma-select-border-color: var(--bulma-input-border-color);
    --bulma-select-color: var(--bulma-text);
    --bulma-textarea-background-color: var(--bulma-input-background-color);
    --bulma-textarea-color: var(--bulma-text);


    /* Bulma Primary, Info, Success, Warning, Danger - slightly desaturated/adjusted for dark */
    --bulma-primary: #00a991; /* Original: #00d1b2 */
    --bulma-primary-invert: #ffffff;
    --bulma-info: #3092dd;    /* Original: #209cee */
    --bulma-success: #3ba744; /* Original: #23d160 */
    --bulma-warning: #ffb747; /* Original: #ffdd57 */
    --bulma-danger: #e74c3c;  /* Original: #ff3860 */

    --bulma-button-background-color: #4a4a4a;
    --bulma-button-text-color: var(--bulma-text);
    --bulma-button-border-color: #5a5a5a;

    --bulma-notification-background-color: #424242;
    
    --bulma-progress-bar-background-color: #444; /* Background of the progress track */
}

/* Apply variables to Bulma - Bulma uses CSS variables extensively in v1.x */
html.dark-mode body {
    background-color: var(--bulma-body-background-color);
    color: var(--bulma-text);
}
html.dark-mode .navbar.is-primary { background-color: var(--bulma-primary); }
html.dark-mode .title { color: var(--bulma-text-strong); }
html.dark-mode .subtitle, html.dark-mode .label, html.dark-mode p, html.dark-mode .content { color: var(--bulma-text); }
html.dark-mode .box { background-color: var(--bulma-box-background-color); box-shadow: 0 0.5em 1em -0.125em rgba(200, 200, 200, 0.1), 0 0px 0 1px rgba(200, 200, 200, 0.02); }
html.dark-mode .card { background-color: var(--bulma-card-background-color); color: var(--bulma-text); }
html.dark-mode .card-header-title { color: var(--bulma-text-strong); }
html.dark-mode .input, html.dark-mode .textarea, html.dark-mode .select select {
    background-color: var(--bulma-input-background-color);
    border-color: var(--bulma-input-border-color);
    color: var(--bulma-input-color);
}
html.dark-mode .input::placeholder, html.dark-mode .textarea::placeholder { color: var(--bulma-input-placeholder-color); }
html.dark-mode .button {
    background-color: var(--bulma-button-background-color);
    border-color: var(--bulma-button-border-color);
    color: var(--bulma-button-text-color);
}
html.dark-mode .button.is-primary { background-color: var(--bulma-primary); color: var(--bulma-primary-invert); }
html.dark-mode .button.is-link { background-color: var(--bulma-info); color: var(--bulma-primary-invert); }
html.dark-mode .button.is-info { background-color: var(--bulma-info); color: var(--bulma-primary-invert); }
html.dark-mode .button.is-success { background-color: var(--bulma-success); color: var(--bulma-primary-invert); }
html.dark-mode .button.is-warning { background-color: var(--bulma-warning); color: #333; } /* Warning often needs dark text */
html.dark-mode .button.is-danger { background-color: var(--bulma-danger); color: var(--bulma-primary-invert); }

html.dark-mode .notification { background-color: var(--bulma-notification-background-color); color: var(--bulma-text); }
html.dark-mode .notification.is-primary { background-color: var(--bulma-primary); color: var(--bulma-primary-invert); }
/* Add other notification types as needed */

html.dark-mode .progress { background-color: var(--bulma-progress-bar-background-color); }
html.dark-mode .progress::-webkit-progress-value { background-color: var(--bulma-success) !important; } /* Ensure Bulma's !important is overridden */
html.dark-mode .progress::-moz-progress-bar { background-color: var(--bulma-success) !important; }

html.dark-mode .modal-card-head, html.dark-mode .modal-card-foot {
    background-color: var(--bulma-box-background-color); /* Or a slightly different shade */
    border-bottom-color: var(--bulma-border);
    border-top-color: var(--bulma-border);
}
html.dark-mode .modal-card-title { color: var(--bulma-text-strong); }
html.dark-mode .modal-card-body { background-color: var(--bulma-card-background-color); }
html.dark-mode .delete::before, html.dark-mode .delete::after { background-color: var(--bulma-text); } /* Ensure modal delete button is visible */


/* --- Custom Switch for Dark Mode Toggle --- */
.switch-button {
  position: relative;
  display: inline-block;
  width: 50px; /* smaller switch */
  height: 28px; /* smaller switch */
}
.switch-button input {
  opacity: 0;
  width: 0;
  height: 0;
}
.slider {
  position: absolute;
  cursor: pointer;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: #ccc;
  transition: .4s;
}
.slider:before {
  position: absolute;
  content: "";
  height: 20px; /* smaller handle */
  width: 20px;  /* smaller handle */
  left: 4px;
  bottom: 4px;
  background-color: white;
  transition: .4s;
}
input:checked + .slider {
  background-color: var(--bulma-primary, #00d1b2); /* Use Bulma primary if available */
}
html.dark-mode input:checked + .slider {
  background-color: var(--bulma-primary); /* Ensure it uses the dark mode primary */
}
input:focus + .slider {
  box-shadow: 0 0 1px var(--bulma-primary, #00d1b2);
}
input:checked + .slider:before {
  transform: translateX(22px); /* Adjust for smaller size */
}
.slider.round {
  border-radius: 28px;
}
.slider.round:before {
  border-radius: 50%;
}


/* --- Floating Action Button (FAB) Menu --- */
.fab-container {
    position: fixed;
    bottom: 25px;
    right: 25px;
    z-index: 100; /* Above notifications */
    display: flex;
    flex-direction: column-reverse; /* Options appear above main button */
    align-items: center;
}
.fab-main {
    width: 56px;
    height: 56px;
    font-size: 1.5em; /* For icon size */
    box-shadow: 0 3px 6px rgba(0,0,0,0.16), 0 3px 6px rgba(0,0,0,0.23);
}
.fab-options {
    display: flex;
    flex-direction: column-reverse;
    align-items: center;
    margin-bottom: 10px; /* Space between main and options */
    transition: all 0.3s ease-in-out;
    opacity: 0;
    transform: translateY(20px) scale(0.5);
    pointer-events: none; /* Initially not interactive */
}
.fab-container.is-active .fab-options {
    opacity: 1;
    transform: translateY(0) scale(1);
    pointer-events: auto;
}
.fab-option {
    width: 48px;
    height: 48px;
    margin-top: 10px; /* Space between option buttons */
    font-size: 1.2em; /* For icon size */
    box-shadow: 0 1px 3px rgba(0,0,0,0.12), 0 1px 2px rgba(0,0,0,0.24);
}
.fab-main .icon, .fab-option .icon {
    transition: transform 0.3s ease-in-out;
}
.fab-container.is-active .fab-main .icon {
    transform: rotate(45deg); /* Rotates '+' to 'x' */
}

/* --- Calendar Styling --- */
.calendar-grid {
    display: grid;
    grid-template-columns: repeat(7, 1fr);
    gap: 5px;
    text-align: center;
}
.calendar-header {
    font-weight: bold;
    padding: 5px;
    font-size: 0.9em;
}
.calendar-day {
    padding: 10px 5px;
    border: 1px solid var(--bulma-border, #dbdbdb);
    border-radius: 4px;
    font-size: 0.9em;
    min-height: 40px; /* Ensure days have some height */
    cursor: default; /* Default, no action on click */
}
html.dark-mode .calendar-day {
    border-color: var(--bulma-border);
}
.calendar-day.is-other-month {
    color: #aaa;
    background-color: #f5f5f5;
}
html.dark-mode .calendar-day.is-other-month {
    color: #777;
    background-color: #303030;
}
.calendar-day.is-completed-day {
    background-color: hsl(141, 53%, 86%); /* Light success */
    text-decoration: line-through;
    color: hsl(141, 53%, 21%); /* Dark success text */
}
html.dark-mode .calendar-day.is-completed-day {
    background-color: hsl(141, 53%, 35%); /* Darker success for dark mode */
    color: hsl(141, 53%, 90%);
}
.calendar-day.is-today {
    font-weight: bold;
    border-color: var(--bulma-primary, #00d1b2);
    box-shadow: 0 0 0 1px var(--bulma-primary, #00d1b2);
}


/* --- Swipe-to-Hide Card Styling --- */
.task-card.is-swiping {
    transition: transform 0.1s linear; /* Quick feedback during swipe */
}
.task-card.is-hiding-swipe {
    transition: transform 0.3s ease-out, opacity 0.3s ease-out;
    transform: translateX(-100%) rotate(-5deg);
    opacity: 0;
}
/* Ensure Bulma's card styles are still respected */
.task-card {
    position: relative; /* For potential absolute positioned swipe indicators */
    user-select: none; /* Prevent text selection during swipe */
}
.task-card.completed-task { /* Original completion style */
    border-left: 5px solid hsl(141, 53%, 53%);
    background-color: hsl(141, 53%, 96%);
}
html.dark-mode .task-card.completed-task {
    border-left-color: var(--bulma-success);
    background-color: #2a4b34; /* Dark green tint */
}

/* Minimal custom styles from previous version */
.card .content p:not(:last-child) { margin-bottom: 0.75em; }
.card .content .field:not(:last-child) { margin-bottom: 0.75rem; }
.card .content .task-item { margin-bottom: 0.5rem; display: flex; align-items: center; }
.card .content .task-item input[type="checkbox"] { margin-right: 0.5em; }
.card .content .task-display { font-style: italic; font-size: 0.9em; margin-top: 0.5em; }
.card .content .small-input { width: 60px !important; padding: 0.25em 0.5em !important; margin: 0 0.25em; text-align: center; }
.card .content hr { margin: 0.75rem 0; }
.is-fixed-bottom-custom { position: fixed; bottom: 0; left: 0; right: 0; z-index: 35; width: auto; margin: 1rem !important; }
.select.is-fullwidth, .select.is-fullwidth select { width: 100%; }
.task-card .button.is-small { margin-left: 0.5em; vertical-align: middle; }

/* Ensure checkbox in card header is aligned */
.card-header-title .checkbox {
    vertical-align: middle;
}